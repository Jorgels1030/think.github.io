{"componentChunkName":"component---src-templates-article-js","path":"/articles/bot-con-casperjs-y-slimmerjs","result":{"data":{"strapiArticle":{"title":"Bot con Casperjs y Slimmerjs","content":"### Instalamos Slimmerjs y Casperjs\n‌\nUtilizamos el siguiente comando para instalar las librerias globalmente con npm  \n```Bash\n$ npm install -g slimmerjs casperjs phamtonjs\n```\nSlimmerjs utiliza (en este momento) Gecko, que es usado por mozilla en sus navegadores, actualmente la versión soportada por slimmerjs es firefox 59.\n‌\nDescargaremos la última versión de firefox soportada por slimmerjs del repositorio ubicado en el siguiente enlace https://ftp.mozilla.org/pub/firefox/releases/.\n‌\nA continuación creamos la variable de entorno que usará slimmerjs para ubicar nuestra versión de firefox.  \n```Bash\n$ export PATH=$PATH:~/ubicacion/de/firefox\n```\n\n### Casperjs con slimmerjs\n‌\nPor defecto casperjs funciona con phantomjs, pero al ser phantomjs una libreria descontinuada (en este momento), usaremos slimmerjs.\n‌\nPara usar Casperjs con Slimmerjs debemos especificar a casperjs que queremos utilizar slimmerjs de la siguiente manera.\n```Bash\n$ casperjs --engine=slimerjs\n```\n\nUtilizaremos el siguiente código, el cual entra a una página y toma un screenshot.\n\n```Javascript\ncaspScreenShot.js \n\ncasper = require('casper').create({\n   viewportSize: { width: 2340, height: 1620 }\n});\ncasper.start('http://localhost:3000/reporte/150101');\ncasper.then(function () {\n       this.echo('Titulo: ' + this.getTitle());\n}).then(function () {\n       casper.wait(15000, function () {\n       casper.evaluate(function(){\n                       //delete div 'content-meta'\n                       document.getElementById(\"rpt-controls\").outerHTML = \"\";\n               });\n               casper.then(function(){\n                       casper.capture('casper-screen.png');\n                   casper.echo(\"Screenshot taken\")\n               })\n       })\n})\ncasper.run();\n```\n\nLuego lo ejecutamos con casperjs y slimmerjs, especificando que queremos ver las salidas en ejecución y queremos ejecutarlo en modo headless.  \n\n```Bash\n$ casperjs --engine=slimerjs --debug=true --headless caspScreenShoot.js\n```\n\nFinalmente en nuestra carpeta exitirá un archivo llamado casper-screen.png","image":{"localFile":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/brain/static/bb5d6b28db74c756b1ec1d58f13892c1/ec73c/4759247af2c3e641c36d4b9eeeaee21e_bb7ff3cfac.jpg","srcSet":"/brain/static/bb5d6b28db74c756b1ec1d58f13892c1/ec73c/4759247af2c3e641c36d4b9eeeaee21e_bb7ff3cfac.jpg 719w","sizes":"100vw"},"sources":[{"srcSet":"/brain/static/bb5d6b28db74c756b1ec1d58f13892c1/024a8/4759247af2c3e641c36d4b9eeeaee21e_bb7ff3cfac.webp 719w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.19193324061196107}}}},"author":null}},"pageContext":{"id":"Article_13"}},"staticQueryHashes":["3649515864","63159454"]}